<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pl친tis</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">
    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="Infinity_Camper_Logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
</head>

<body>
    <!-- Topbar -->
    <header class="topbar">
        <img src="infi.camp.png" alt="Camp logo" class="topbar-img">

        <!-- Hamburger toggle -->
        <div class="menu-toggle" id="mobile-menu">
            <i class="fa fa-bars"></i>
        </div>

        <!-- Navigationsmeny -->
        <nav class="nav" id="navbar">
            <a href="index.html">Home</a>
            <a href="produkter.html">Infinity Camper</a>
            <a href="delar.html">츿lgstaket/Frontb친gar till Lastbilar</a>
        </nav>

        <img src="CGT_bild-removebg-preview.png" alt="cgt bild" class="topbar-img">
    </header>

    <!-- Video + Container -->
    <main>
        <div class="content-wrapper">
            <!-- Videon -->
            <div class="video-box">
                <video autoplay muted loop playsinline id="mainVideo"></video>
                <button class="mute-btn" id="muteBtn">游댆</button>
            </div>

            <!-- Container -->
            <div class="main-container">
                <h1>Galleri</h1>
                <div id="platis-gallery" class="gallery">
                    <!-- Bilder & videor fr친n kategori 5 laddas h칛r -->
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <h2>Kontakt</h2>
        <p><strong>Telefon:</strong> +46735913525</p>
        <p><strong>E-mail:</strong> <a href="mailto:Info@cgtsweden.se">Info@cgtsweden.se</a></p>
        <div class="socials">
            <a href="https://www.facebook.com/share/1B5CBZM7mx/" target="_blank">
                <i class="fa-brands fa-square-facebook"></i>
            </a>
        </div>
    </footer>

    <script>
        const mobileMenu = document.getElementById('mobile-menu');
        const navbar = document.getElementById('navbar');

        mobileMenu.addEventListener('click', () => {
            navbar.classList.toggle('active');
        });

        const wpApiUrl = "https://www.cgtsweden.se/wp-json/wp/v2/media?per_page=100";
        const platisCategoryId = 5; // galleri
        const topVideoCategoryId = 6; // toppvideo

        fetch(wpApiUrl)
            .then(res => res.json())
            .then(data => {
                // === Galleri (kategori 5) ===
                const gallery = document.getElementById("platis-gallery");
                const filtered = data.filter(
                    item => item.attachment_categories && item.attachment_categories.includes(platisCategoryId)
                );

                gallery.innerHTML = filtered.map(item => {
                    if (item.mime_type.startsWith("image/")) {
                        return `
                            <a href="${item.source_url}" class="glightbox">
                                <img src="${item.source_url}" alt="${item.alt_text || 'Pl친tis-bild'}">
                            </a>
                        `;
                    } else if (item.mime_type.startsWith("video/")) {
                        return `
                            <a href="${item.source_url}" class="glightbox" data-type="video">
                                <video muted>
                                    <source src="${item.source_url}" type="${item.mime_type}">
                                </video>
                            </a>
                        `;
                    } else {
                        return "";
                    }
                }).join("");

                GLightbox({
                    selector: '.glightbox',
                    touchNavigation: true,
                    autoplayVideos: true
                });

                // === Toppvideo (kategori 6) ===
                const topVideo = data.find(
                    item => item.attachment_categories &&
                    item.attachment_categories.includes(topVideoCategoryId) &&
                    item.mime_type.startsWith("video/")
                );

                if (topVideo) {
                    const videoEl = document.getElementById('mainVideo');
                    videoEl.innerHTML = `
                        <source src="${topVideo.source_url}" type="${topVideo.mime_type}">
                    `;
                    videoEl.load();
                }
            })
            .catch(err => console.error("Fel vid h칛mtning av media:", err));

        // === Ljudknapp f칬r toppvideon ===
        const video = document.getElementById('mainVideo');
        const muteBtn = document.getElementById('muteBtn');

        function updateButton() {
            muteBtn.textContent = video.muted ? '游댆' : '游댉';
        }

        muteBtn.addEventListener('click', () => {
            video.muted = !video.muted;
            updateButton();
        });

        updateButton();
    </script>

</body>

</html>
```