<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGT Pl√•tisar</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">
    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="Infinity_Camper_Logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
</head>

<body>
    <!-- Topbar -->
    <header class="topbar">
        <img src="infi.camp.png" alt="Camp logo" class="topbar-img">

        <!-- Hamburger toggle -->
        <div class="menu-toggle" id="mobile-menu">
            <i class="fa fa-bars"></i>
        </div>

        <!-- Navigationsmeny -->
        <nav class="nav" id="navbar">
            <a href="index.html">Home</a>
            <a href="produkter.html">Infinity Camper</a>
            <a href="delar.html">√Ñlgstaket/Frontb√•gar till Lastbilar</a>
        </nav>

        <img src="CGT_bild-removebg-preview.png" alt="cgt bild" class="topbar-img">
    </header>
    <main class="platis-page">
        <!-- üü© INFO-RUTA OVANF√ñR VIDEON -->
        <section class="info-box">
            <h2 class="info-title">Uppt√§ck v√•ra unika pl√•tisar</h2>


            <div class="info-grid">
                <div class="info-card">
                    <h3>‚òÄÔ∏è Solinstallationer</h3>
                    <p>Premium 450 W paneler med MPPT-kontroller och litiumbatteri, diskret integrerade i taket f√∂r ren energi och l√•ng autonomi.</p>
                </div>

                <div class="info-card">
                    <h3>üå≤ Premium Tr√§m√∂bler</h3>
                    <p>Modul√§ra hyllor, hopf√§llbara bord och LED-belysning f√∂r en varm och funktionell milj√∂ i alla situationer.</p>
                </div>

                <div class="info-card">
                    <h3>üõèÔ∏è Sovutrymme</h3>
                    <p>Bekv√§m s√§ng med mjuk madrass och integrerade USB-uttag, f√∂r lugn vila och laddning av enheter.</p>
                </div>

                <div class="info-card">
                    <h3>üç≥ Integrerad K√∂k</h3>
                    <p>Gasspis med tre kokzoner, 12 V-kylsk√•p och diskho i rostfritt st√•l med modern kran, f√∂r god mat √§ven utanf√∂r hemmet.</p>
                </div>

                <div class="info-card">
                    <h3>üöø Badrum & Dusch</h3>
                    <p>Kabin med paneler i konstgjord marmor, dusch med h√∂gt tryck och premium-avloppssystem ‚Äî komfort utan kompromiss p√• varje √§ventyr.</p>
                </div>

                <div class="info-card">
                    <h3>üîá Komfort & Isolering</h3>
                    <p>Alla v√•ra pl√•tisar √§r ljudisolerade och isolerade med marknadsledande varum√§rken, vilket garanterar en tyst, behaglig och energieffektiv upplevelse √•ret runt.</p>
                </div>
            </div>
        </section>



        <div class="content-wrapper">
            <div class="video-box">
                <video autoplay muted loop playsinline id="mainVideo"></video>
                <button class="mute-btn" id="muteBtn">üîá</button>
            </div>

            <div class="main-container">
                <h1>Galleri</h1>
                <div id="platis-gallery" class="gallery"></div>
            </div>
        </div>
    </main>


    <footer class="footer">
        <h2>Kontakt</h2>
        <p><strong>Telefon:</strong> +46735913525</p>
        <p><strong>E-mail:</strong> <a href="mailto:Info@cgtsweden.se">Info@cgtsweden.se</a></p>
        <div class="socials">
            <a href="https://www.facebook.com/share/1B5CBZM7mx/" target="_blank">
                <i class="fa-brands fa-square-facebook"></i>
            </a>
        </div>
    </footer>

    <script>
        const mobileMenu = document.getElementById('mobile-menu');
        const navbar = document.getElementById('navbar');

        mobileMenu.addEventListener('click', () => {
            navbar.classList.toggle('active');
        });

        const wpApiUrl = "https://www.cgtsweden.se/wp-json/wp/v2/media?per_page=100";
        const platisCategoryId = 5; // galleri
        const topVideoCategoryId = 6; // toppvideo

        fetch(wpApiUrl)
            .then(res => res.json())
            .then(data => {
                // === Galleri (kategori 5) ===
                const gallery = document.getElementById("platis-gallery");
                const filtered = data.filter(
                    item => item.attachment_categories && item.attachment_categories.includes(platisCategoryId)
                );

                gallery.innerHTML = filtered.map(item => {
                    if (item.mime_type.startsWith("image/")) {
                        return `
                            <a href="${item.source_url}" class="glightbox">
                                <img src="${item.source_url}" alt="${item.alt_text || 'Pl√•tis-bild'}">
                            </a>
                        `;
                    } else if (item.mime_type.startsWith("video/")) {
                        return `
                            <a href="${item.source_url}" class="glightbox" data-type="video">
                                <video muted>
                                    <source src="${item.source_url}" type="${item.mime_type}">
                                </video>
                            </a>
                        `;
                    } else {
                        return "";
                    }
                }).join("");

                GLightbox({
                    selector: '.glightbox',
                    touchNavigation: true,
                    autoplayVideos: true
                });

                // === Toppvideo (kategori 6) ===
                const topVideo = data.find(
                    item => item.attachment_categories &&
                    item.attachment_categories.includes(topVideoCategoryId) &&
                    item.mime_type.startsWith("video/")
                );

                if (topVideo) {
                    const videoEl = document.getElementById('mainVideo');
                    videoEl.innerHTML = `
                        <source src="${topVideo.source_url}" type="${topVideo.mime_type}">
                    `;
                    videoEl.load();
                }
            })
            .catch(err => console.error("Fel vid h√§mtning av media:", err));

        // === Ljudknapp f√∂r toppvideon ===
        const video = document.getElementById('mainVideo');
        const muteBtn = document.getElementById('muteBtn');

        function updateButton() {
            muteBtn.textContent = video.muted ? 'üîá' : 'üîä';
        }

        muteBtn.addEventListener('click', () => {
            video.muted = !video.muted;
            updateButton();
        });

        updateButton();
    </script>

</body>

</html>